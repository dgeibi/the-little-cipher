{"version":3,"sources":["../../../src/server/middleware/hot.js"],"names":["webpackConfig","compiler","middlewares","noInfo","publicPath","output","req","res","next","filename","outputPath","outputFileSystem","readFile","err","result","set","send","end"],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,gBAAgB,wBAAtB;;AAEA,MAAMC,WAAW,uBAAQD,aAAR,CAAjB;;AAEA,MAAME,cAAc,CAClB,oCAAqBD,QAArB,EAA+B;AAC7BE,UAAQ,IADqB;AAE7BC,cAAYJ,cAAcK,MAAd,CAAqBD;AAFJ,CAA/B,CADkB,EAKlB,oCAAqBH,QAArB,CALkB,EAMlB,CAACK,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAClB,QAAMC,WAAW,gBAAKR,SAASS,UAAd,EAA0B,YAA1B,CAAjB;AACAT,WAASU,gBAAT,CAA0BC,QAA1B,CAAmCH,QAAnC,EAA6C,CAACI,GAAD,EAAMC,MAAN,KAAiB;AAC5D,QAAID,GAAJ,EAAS;AACPL,WAAKK,GAAL;AACA;AACD;AACDN,QAAIQ,GAAJ,CAAQ,cAAR,EAAwB,WAAxB;AACAR,QAAIS,IAAJ,CAASF,MAAT;AACAP,QAAIU,GAAJ;AACD,GARD;AASD,CAjBiB,CAApB;;kBAoBef,W","file":"hot.js","sourcesContent":["import webpack from 'webpack'\nimport { join } from 'path'\nimport webpackDevMiddleware from 'webpack-dev-middleware'\nimport webpackHotMiddleware from 'webpack-hot-middleware'\nimport getWebpackConfig from '../../../webpack.config'\n\nconst webpackConfig = getWebpackConfig()\n\nconst compiler = webpack(webpackConfig)\n\nconst middlewares = [\n  webpackDevMiddleware(compiler, {\n    noInfo: true,\n    publicPath: webpackConfig.output.publicPath,\n  }),\n  webpackHotMiddleware(compiler),\n  (req, res, next) => {\n    const filename = join(compiler.outputPath, 'index.html')\n    compiler.outputFileSystem.readFile(filename, (err, result) => {\n      if (err) {\n        next(err)\n        return\n      }\n      res.set('content-type', 'text/html')\n      res.send(result)\n      res.end()\n    })\n  },\n]\n\nexport default middlewares\n"]}