{"version":3,"sources":["../../src/server/playfair.js"],"names":["getResults","secret","plaintext","diff","square","cipherText","plainText","playfairMiddleware","req","res","file","path","err","buffer","console","log","sendStatus","status","json","body","toString"],"mappings":";;;;;;AAAA;;AACA;;AACA;;AAEA,MAAMA,aAAa,CAACC,MAAD,EAASC,SAAT,KAAuB;AACxC,QAAM,EAAEC,IAAF,EAAQC,MAAR,KAAmB,wBAASH,MAAT,EAAiBC,SAAjB,CAAzB;;AAEA,QAAMG,aAAa,4BAAaF,IAAb,CAAnB;AACA,QAAMG,YAAY,8BAAeH,IAAf,CAAlB;;AAEA,SAAO;AACLA,QADK;AAELC,UAFK;AAGLC,cAHK;AAILC;AAJK,GAAP;AAMD,CAZD;;AAcA,MAAMC,qBAAqB,CAACC,GAAD,EAAMC,GAAN,KAAc;AACvC,MAAID,IAAIE,IAAJ,IAAY,uBAAYF,IAAIE,IAAhB,CAAhB,EAAuC;AACrC,sBAASF,IAAIE,IAAJ,CAASC,IAAlB,EAAwB,CAACC,GAAD,EAAMC,MAAN,KAAiB;AACvC,UAAID,GAAJ,EAAS;AACPE,gBAAQC,GAAR,CAAYH,GAAZ;AACAH,YAAIO,UAAJ,CAAe,GAAf;AACA;AACD;AACDP,UAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBlB,WAAWQ,IAAIW,IAAJ,CAASlB,MAApB,EAA4BY,OAAOO,QAAP,EAA5B,CAArB;AACD,KAPD;AAQD,GATD,MASO,IAAIZ,IAAIW,IAAJ,CAASjB,SAAb,EAAwB;AAC7BO,QAAIQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBlB,WAAWQ,IAAIW,IAAJ,CAASlB,MAApB,EAA4BO,IAAIW,IAAJ,CAASjB,SAArC,CAArB;AACD,GAFM,MAEA;AACLO,QAAIO,UAAJ,CAAe,GAAf;AACD;AACF,CAfD;;kBAiBeT,kB","file":"playfair.js","sourcesContent":["import { readFile } from 'fs'\nimport { playfair, cipherString, originalString } from '../cipher/playfair'\nimport { isPlainFile } from '../util'\n\nconst getResults = (secret, plaintext) => {\n  const { diff, square } = playfair(secret, plaintext)\n\n  const cipherText = cipherString(diff)\n  const plainText = originalString(diff)\n\n  return {\n    diff,\n    square,\n    cipherText,\n    plainText,\n  }\n}\n\nconst playfairMiddleware = (req, res) => {\n  if (req.file && isPlainFile(req.file)) {\n    readFile(req.file.path, (err, buffer) => {\n      if (err) {\n        console.log(err)\n        res.sendStatus(500)\n        return\n      }\n      res.status(200).json(getResults(req.body.secret, buffer.toString()))\n    })\n  } else if (req.body.plaintext) {\n    res.status(200).json(getResults(req.body.secret, req.body.plaintext))\n  } else {\n    res.sendStatus(400)\n  }\n}\n\nexport default playfairMiddleware\n"]}